<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>ad-llama demo</title>
    <script type="importmap">
    {
      "imports" : {
        "ad-llama": "./index.js"
      }
    }
    </script>
    <script type="module" src="./index.js"></script>
  </head>
  <body>
    <h1>Hello, MLC! Open the console</h1>
    <p><code>generator</code> is available on <code>window</code> in console.</p>
    <pre><code>
const { template, a } = generator(
  '&lt&ltsys&gt&gtYou are a dungeon master. &lt&lt/sys&gt&gt\n\n[INST] Create a character based on the Dungeons and Dragons universe.'
)

const result = template`
{
"description": "${a('short description')}",
"name": "${a('character name')}",
"weapon": "${a('weapon')}",
"class": "${a('class')}"
}
`

console.log(await result.collect())
    </code></pre>
    <script type="module">
    import { initialize, ad, guessModelSpecFromPrebuiltId } from 'ad-llama'

    const api = await initialize()
    const loadedModel = await api.loadModel(guessModelSpecFromPrebuiltId('Llama-2-7b-chat-hf-q4f32_1'))

    const generator = ad(loadedModel)
    window.generator = generator

    const { template, a } = generator(
      '<<sys>>You are a dungeon master. <</sys>>\n\n[INST] Create a character based on the Dungeons and Dragons universe.'
    )

    const result = template`
{
  "description": "${a('short description')}",
  "name": "${a('character name')}",
  "weapon": "${a('weapon')}",
  "class": "${a('class')}"
}
`

    console.log(await result.collect())
    </script>
  </body>
</html>
